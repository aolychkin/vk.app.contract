syntax = "proto3";

package stories;

option go_package = "vk.stories.v1;stories_v1";

//TODO: сделать запросы менее жирными. Отправлять только то, что нужно для модуля доски
service StoriesService {
  rpc GetUserInfo (GetUserInfoRequest) returns (GetUserInfoResponse);
  rpc GetUserBalance (GetUserBalanceRequest) returns (GetUserBalanceResponse);
  rpc PostUserActivity (PostUserActivityRequest) returns (PostUserActivityResponse);
  // rpc GetUserActivities (GetUserActivitiesRequest) returns (GetUserActivitiesResponse);
}


// ____________________________ ||
// ____ Request / Response ____ ||
// ____________________________ ||
message GetUserInfoRequest {
  string id = 1;
}
message GetUserInfoResponse {
  DTOUserInfo user_info = 1;
}

message GetUserBalanceRequest {
  string id = 1;
}
message GetUserBalanceResponse {
  int32 balance = 1;
}

message PostUserActivityRequest {
  DTOUserActivity activity = 1;
}
message PostUserActivityResponse  {
  string id = 1;
}

// message GetUserActivitiesRequest {
//   string id = 1;
// }

// message GetUserActivitiesResponse {
//   DTOUserActivity last_activity = 1;
//   DTOUserActivity history = 2;
// }


// ___________________________ ||
// ______ User Entities ______ ||
// ___________________________ ||
message DTOUserInfo {
  string id = 1;
  // Базовая информация по пользователю
  string vk_id = 2;
  string name = 3;
  string surname = 4;
  string age = 5;
  string region = 6;
  string university = 7;
  string direction = 8;
  string curse = 9;
}

message DTOUserActivity{
  string user_id = 2;
  Sphere sphere = 3;
  string step = 4;
  int32 income = 5;
}

// ____________________________ ||
// _____ Stories Entities _____ ||
// ____________________________ ||
message DTOStory{
  string id = 1;
  Sphere sphere = 2;
  string step = 3;
  int32 income = 4;
}


// ___________________________ ||
// __________ ENUMS __________ ||
// ___________________________ ||
enum Sphere {
  UNKNOWN = 0;
  IT = 2;
  SOC = 4;
  EDU = 8;
  CREATIVE = 16;
}